(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9bd8102"],{5899:function(e,a){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,a,t){var n=t("1d80"),r=t("5899"),l="["+r+"]",o=RegExp("^"+l+l+"*"),s=RegExp(l+l+"*$"),i=function(e){return function(a){var t=String(n(a));return 1&e&&(t=t.replace(o,"")),2&e&&(t=t.replace(s,"")),t}};e.exports={start:i(1),end:i(2),trim:i(3)}},a9e3:function(e,a,t){"use strict";var n=t("83ab"),r=t("da84"),l=t("94ca"),o=t("6eeb"),s=t("5135"),i=t("c6b6"),c=t("7156"),d=t("c04e"),m=t("d039"),h=t("7c73"),p=t("241c").f,u=t("06cf").f,b=t("9bf2").f,f=t("58a8").trim,I="Number",D=r[I],F=D.prototype,g=i(h(F))==I,v=function(e){var a,t,n,r,l,o,s,i,c=d(e,!1);if("string"==typeof c&&c.length>2)if(c=f(c),a=c.charCodeAt(0),43===a||45===a){if(t=c.charCodeAt(2),88===t||120===t)return NaN}else if(48===a){switch(c.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(l=c.slice(2),o=l.length,s=0;s<o;s++)if(i=l.charCodeAt(s),i<48||i>r)return NaN;return parseInt(l,n)}return+c};if(l(I,!D(" 0o1")||!D("0b1")||D("+0x1"))){for(var x,N=function(e){var a=arguments.length<1?0:e,t=this;return t instanceof N&&(g?m((function(){F.valueOf.call(t)})):i(t)!=I)?c(new D(v(a)),t,N):v(a)},y=n?p(D):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),$=0;y.length>$;$++)s(D,x=y[$])&&!s(N,x)&&b(N,x,u(D,x));N.prototype=F,F.constructor=N,o(r,I,N)}},e150:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-form",{ref:"baseDataForm",attrs:{model:e.baseDataForm,rules:e.baseDataRule}},[t("el-form-item",{attrs:{label:"栏目模型","label-width":e.formLabelWidth,prop:"modelId"}},[t("el-col",{attrs:{span:11}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.baseDataForm.modelId,callback:function(a){e.$set(e.baseDataForm,"modelId",a)},expression:"baseDataForm.modelId"}},e._l(e.modelSelectOptions,(function(e){return t("el-option",{key:e,attrs:{label:e.modelName,value:e.modelId}})})),1)],1)],1),t("el-form-item",{attrs:{label:"栏目名称","label-width":e.formLabelWidth,prop:"channelName"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{placeholder:"请填写栏目名称"},model:{value:e.baseDataForm.channelName,callback:function(a){e.$set(e.baseDataForm,"channelName",a)},expression:"baseDataForm.channelName"}})],1)],1),t("el-form-item",{attrs:{label:"上级栏目","label-width":e.formLabelWidth,prop:"basPparentId"}},[t("el-col",{attrs:{span:11}},[t("el-tree-select",{attrs:{props:e.props,options:e.optionData,value:e.valueId,clearable:e.isClearable,accordion:e.isAccordion,height:"200"},on:{getValue:function(a){return e.getValue(a)}}}),e._v(" ID为："+e._s(e.channelId)+" ")],1)],1),t("el-form-item",{attrs:{label:"访问路径","label-width":e.formLabelWidth,prop:"baseChannelPath"}},[t("el-col",{attrs:{span:11}},[t("el-input",{model:{value:e.baseDataForm.channelPath,callback:function(a){e.$set(e.baseDataForm,"channelPath",a)},expression:"baseDataForm.channelPath"}})],1)],1),t("el-form-item",{attrs:{label:"显示序列","label-width":e.formLabelWidth,prop:"priority"}},[t("el-col",{attrs:{span:11}},[t("el-input-number",{staticStyle:{width:"200px"},attrs:{"controls-position":"right",min:1},model:{value:e.baseDataForm.priority,callback:function(a){e.$set(e.baseDataForm,"priority",a)},expression:"baseDataForm.priority"}})],1)],1),t("el-form-item",{attrs:{label:"是否显示","label-width":e.formLabelWidth}},[t("el-col",{attrs:{span:11}},[t("el-switch",{model:{value:e.baseDataForm.isDisplay,callback:function(a){e.$set(e.baseDataForm,"isDisplay",a)},expression:"baseDataForm.isDisplay"}})],1)],1),t("el-form-item",{attrs:{label:"栏目内容","label-width":e.formLabelWidth,prop:"txt.txt"}},[t("el-col",{attrs:{span:22}},[t("tinymce-editor",{ref:"editor",model:{value:e.baseDataForm.txt.txt,callback:function(a){e.$set(e.baseDataForm.txt,"txt",a)},expression:"baseDataForm.txt.txt"}})],1)],1),t("el-form-item",[t("el-col",{attrs:{span:22,align:"center"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.submitChannelBaseForm()}}},[e._v("保存修改")])],1)],1)],1)],1)},r=[],l=(t("a9e3"),t("d3b7"),{name:"channel-base",props:{channelId:{type:Number,default:function(){return[0]}},optionData:{type:Array,default:function(){return null}}},data:function(){return{title:"base",formLabelWidth:"120px",modelSelectOptions:[],baseDataForm:{channelId:"",channelName:"",modelId:"",channelPath:"",parentId:"",priority:"",isDisplay:"",txt:{txt:""}},baseDataRule:{modelId:[{required:!0,message:"请选择栏目模型",trigger:"change"}],channelName:[{required:!0,message:"栏目名称不能为空",trigger:"blur"}],baseParentId:[{required:!0,message:"上级栏目不能为空",trigger:"change"}]},isClearable:!0,isAccordion:!0,valueId:0,props:{value:"channelId",label:"channelName",children:"children"}}},watch:{channelId:function(e,a){console.log("监听到变化了..."),this.valueId=e}},components:{TinymceEditor:function(){return t.e("chunk-ffc0e5ba").then(t.bind(null,"26dc"))},ElTreeSelect:function(){return t.e("chunk-0462dab4").then(t.bind(null,"dca5"))}},created:function(){this.viewParentParam(),this.loadModelSelectOptions(),this.loadChannelDetailInfo(this.channelId),this.valueId=this.channelId,this.baseDataForm.parentId=this.channelId},methods:{viewParentParam:function(){console.log("上级传过来的参数:"+this.channelId)},loadModelSelectOptions:function(){var e=this;this.$http({url:this.$http.adornUrl("/cms/model/list"),method:"get",params:this.$http.adornParams({})}).then((function(a){var t=a.data;e.modelSelectOptions=t.modelList}))},submitChannelBaseForm:function(){var e=this;console.log("提交表单"),this.$refs["baseDataForm"].validate((function(a){a?(e.$http({url:e.$http.adornUrl("/cms/channel/update"),method:"post",data:e.$http.adornData({modelId:e.baseDataForm.modelId,channelId:e.baseDataForm.channelId,channelName:e.baseDataForm.channelName,parentId:e.baseDataForm.parentId,channelPath:e.baseDataForm.channelPath,isDisplay:e.baseDataForm.isDisplay?1:0,priority:e.baseDataForm.priority,txt:{channelId:e.baseDataForm.channelId,txt:e.baseDataForm.txt.txt}})}).then((function(a){var t=a.data;t&&200===t.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.$parent.loadChannelTree()}}):e.$message.error(t.msg)})),console.log("通过")):console.log("失败")}))},loadChannelDetailInfo:function(e){var a=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/cms/channel/detail"),method:"get",params:this.$http.adornParams({channelId:e})}).then((function(e){var t=e.data;if(console.log(t),t.code&&200===t.code){var n=t.channelInfo;n&&(a.baseDataForm.channelId=n.channelId,a.baseDataForm.channelName=n.channelName,a.baseDataForm.modelId=n.modelId,a.baseDataForm.channelPath=n.channelPath,a.baseDataForm.parentId=n.parentId,a.baseDataForm.priority=n.priority,a.baseDataForm.isDisplay=1===n.isDisplay,a.baseDataForm.txt.txt=null===n.txt?"":n.txt.txt)}else a.$message.error("数据加载失败！");a.dataListLoading=!1}))},getValue:function(e){this.valueId=e}}}),o=l,s=t("2877"),i=Object(s["a"])(o,n,r,!1,null,"c02e452e",null);a["default"]=i.exports}}]);