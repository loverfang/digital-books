(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f763fbb"],{"062d":function(e,t,a){},5842:function(e,t,a){"use strict";var i=a("062d"),n=a.n(i);n.a},ab26:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mod-menu"},[a("el-form",{attrs:{inline:!0,model:e.dataForm}},[a("el-form-item",[e.isAuth("wx:wxassets:save")?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.addOrUpdateHandle()}}},[e._v("新增")]):e._e()],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}]},e._l(e.dataList,(function(t){return a("div",{key:t.mediaId,staticClass:"card",on:{click:function(a){return e.onSelect(t)}}},["image"==e.fileType?a("el-image",{staticClass:"card-image",attrs:{src:t.url,fit:"contain",lazy:""}}):a("div",{staticClass:"card-preview"},["voice"==e.fileType?a("div",{staticClass:"card-preview-icon el-icon-microphone"}):e._e(),"video"==e.fileType?a("div",{staticClass:"card-preview-icon el-icon-video-camera-solid"}):e._e(),a("div",{staticClass:"card-preview-text"},[e._v("管理后台不支持预览"),a("br"),e._v("微信中可正常播放")])]),a("div",{staticClass:"card-footer"},[a("div",{staticClass:"text-cut-name"},[e._v(e._s(t.name))]),a("div",[e._v(e._s(e.$moment(t.updateTime).calendar()))]),a("div",{staticClass:"flex justify-between align-center"},[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.mediaId,expression:"item.mediaId",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onCopyError,expression:"onCopyError",arg:"error"}],attrs:{size:"mini",type:"text",icon:"el-icon-copy-document"}},[e._v("复制media_id")]),a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.deleteHandle(t.mediaId)}}},[e._v("删除")])],1)])],1)})),0),a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[20],"page-size":20,total:e.totalCount,layout:"total, prev,pager, next, jumper"},on:{"current-change":e.currentChangeHandle}}),e.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.onChange}}):e._e()],1)},n=[],s=(a("d3b7"),{name:"material-file",props:{fileType:{type:String,default:"image"},selectMode:{type:Boolean,default:!1}},components:{AddOrUpdate:function(){return a.e("chunk-63db476a").then(a.bind(null,"8cbd"))}},data:function(){return{dataForm:{},addOrUpdateVisible:!1,dataList:[],pageIndex:1,pageSize:20,totalCount:0,dataListLoading:!1}},mounted:function(){this.init()},methods:{init:function(){this.dataList.length||this.getDataList()},getDataList:function(){var e=this;this.dataListLoading||(this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/manage/wxAssets/materialFileBatchGet"),params:this.$http.adornParams({page:this.pageIndex,type:this.fileType})}).then((function(t){var a=t.data;a&&200==a.code?(e.dataList=a.data.items,e.totalCount=a.data.totalCount,e.pageIndex++):e.$message.error(a.msg),e.dataListLoading=!1})))},addOrUpdateHandle:function(){var e=this;this.addOrUpdateVisible=!0,this.$nextTick((function(){e.$refs.addOrUpdate.init(e.fileType)}))},onSelect:function(e){this.selectMode&&this.$emit("selected",e)},deleteHandle:function(e){var t=this;this.$confirm("确定对[mediaId=".concat(e,"]进行删除操作?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http({url:t.$http.adornUrl("/manage/wxAssets/materialDelete"),method:"post",data:{mediaId:e}}).then((function(e){var a=e.data;a&&200===a.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.getDataList(),t.$emit("change")}}):t.$message.error(a.msg)}))}))},currentChangeHandle:function(e){this.pageIndex=e,this.getDataList()},onCopySuccess:function(){this.$message.success("已复制")},onCopyError:function(e){this.$message.error("复制失败,可能是此浏览器不支持复制")},onChange:function(){this.getDataList(),this.$emit("change")}}}),o=s,r=(a("5842"),a("2877")),d=Object(r["a"])(o,i,n,!1,null,"00b5c392",null);t["default"]=d.exports}}]);