(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-326a2ff6","chunk-51a92432"],{"0fb5":function(e,t,n){},"1f38":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var a=function(){return"undefined"!==typeof window?window:e},o=function(){var e=a();return e&&e.tinymce?e.tinymce:null}}).call(this,n("c8ba"))},"26dc":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tinymce-editor"},[n("editor",{attrs:{init:e.init},on:{onExecCommand:e.onExecCommand},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})],1)},o=[],i=(n("b0c0"),n("d3b7"),["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"]),r=function(e){return-1!==i.indexOf(e)},s=function(e,t,n){Object.keys(t).filter(r).forEach((function(a){var o=t[a];"function"===typeof o&&("onInit"===a?o(e,n):n.on(a.substring(2),(function(e){return o(e,n)})))}))},l=function(e,t){var n,a=e.$props.modelEvents?e.$props.modelEvents:null,o=Array.isArray(a)?a.join(" "):a;e.$watch("value",(function(e,a){t&&"string"===typeof e&&e!==n&&e!==a&&(t.setContent(e),n=e)})),t.on(o||"change keyup undo redo",(function(){n=t.getContent(),e.$emit("input",n)}))},c=function(e,t,n){var a=t.$props.value?t.$props.value:"",o=t.$props.initialValue?t.$props.initialValue:"";n.setContent(a||o),t.$listeners.input&&l(t,n),s(e,t.$listeners,n)},d=0,u=function(e){var t=Date.now(),n=Math.floor(1e9*Math.random());return d++,e+"_"+n+d+String(t)},p=function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()},m=function(e){return"undefined"===typeof e||""===e?[]:Array.isArray(e)?e:e.split(" ")},f=function(e,t){return m(e).concat(m(t))},h=function(e,t,n,a){var o=t.createElement("script");o.type="application/javascript",o.id=e,o.addEventListener("load",a),o.src=n,t.head&&t.head.appendChild(o)},g=function(){return{listeners:[],scriptId:u("tiny-script"),scriptLoaded:!1}},y=function(e,t,n,a){e.scriptLoaded?a():(e.listeners.push(a),t.getElementById(e.scriptId)||h(e.scriptId,t,n,(function(){e.listeners.forEach((function(e){return e()})),e.scriptLoaded=!0})))},v=n("1f38"),b={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean},w=function(){return w=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},w.apply(this,arguments)},$=g(),x=function(e,t,n){return e(n||"div",{attrs:{id:t}})},P=function(e,t){return e("textarea",{attrs:{id:t},style:{visibility:"hidden"}})},C=function(e){return function(){var t=w({},e.$props.init,{readonly:e.$props.disabled,selector:"#"+e.elementId,plugins:f(e.$props.init&&e.$props.init.plugins,e.$props.plugins),toolbar:e.$props.toolbar||e.$props.init&&e.$props.init.toolbar,inline:e.inlineEditor,setup:function(t){e.editor=t,t.on("init",(function(n){return c(n,e,t)})),e.$props.init&&"function"===typeof e.$props.init.setup&&e.$props.init.setup(t)}});p(e.element)&&(e.element.style.visibility=""),Object(v["a"])().init(t)}},I={props:b,created:function(){this.elementId=this.$props.id||u("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==Object(v["a"])())C(this)();else if(this.element&&this.element.ownerDocument){var e=this.element.ownerDocument,t=this.$props.cloudChannel?this.$props.cloudChannel:"5",n=this.$props.apiKey?this.$props.apiKey:"no-api-key";y($,e,"https://cdn.tiny.cloud/1/"+n+"/tinymce/"+t+"/tinymce.min.js",C(this))}},beforeDestroy:function(){null!==Object(v["a"])()&&Object(v["a"])().remove(this.editor)},render:function(e){return this.inlineEditor?x(e,this.elementId,this.$props.tagName):P(e,this.elementId)}},S=I,k={name:"tinymce-editor",components:{Editor:S},props:{value:{type:String,default:""}},data:function(){return{init:{language_url:"/res/admin/lib/tinymce@4.8.2/langs/zh_CN.js",language:"zh_CN",height:200,menubar:!1,plugins:"lists image table paste link searchreplace code pagebreak importcss",toolbar:"undo redo | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | lists link anchor image table | removeformat code",toolbar_drawer:!1,image_advtab:!0,object_resizing:!1,paste_data_images:!0,convert_urls:!1,default_link_target:"_blank",images_upload_handler:function(e,t,n){var a,o,i="/api/sys/oss/uploadFile";a=new XMLHttpRequest,a.withCredentials=!1,a.open("POST",i),a.upload.onprogress=function(e){progress(e.loaded/e.total*100)},a.onload=function(){var e;a.status<200||a.status>=300?n("HTTP Error: "+a.status):(e=JSON.parse(a.responseText),e?!e.files[0]||e.files[0].length<=0?n("未获取到文件回写地址"):t(e.files[0].filePath):n("Invalid JSON: "+a.responseText))},a.onerror=function(){n("Image upload failed due to a XHR Transport error. Code: "+a.status)},o=new FormData,o.append("file",e.blob(),e.filename()),a.send(o)},file_picker_callback:function(e,t,n){var a=".pdf, .txt, .zip, .rar, .7z, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .mp3, .mp4",o="/api/sys/oss/uploadFile",i=document.createElement("input");i.setAttribute("type","file"),i.setAttribute("accept",a),i.click(),i.onchange=function(){var t,n,a=this.files[0];console.log(a.name),t=new XMLHttpRequest,t.withCredentials=!1,t.open("POST",o),t.onload=function(){var n;200==t.status?(n=JSON.parse(t.responseText),n?!n.files[0]||n.files[0].length<=0?failure("未获取到文件回写地址"):e(n.files[0].filePath):failure("Invalid JSON: "+t.responseText)):failure("HTTP Error: "+t.status)},n=new FormData,n.append("file",a,a.name),t.send(n)}}},myValue:this.value,uploading:!1,cosConfig:[]}},mounted:function(){tinymce.init({})},methods:{onExecCommand:function(e){},uploadFile:function(e){var t=this;return this.uploading=!0,new Promise((function(n,a){var o=new FormData;o.append("file",e),t.$http({url:t.$http.adornUrl("/sys/oss/uploadFile"),method:"post",data:o}).then((function(e){var o=e.data;console.log(o),o&&200===o.code?(t.$emit("uploaded",o.files[0].filePath),n(o.files[0].filePath)):(t.$message.error("文件上传失败："+o.msg),a(o.msg)),t.uploading=!1})).catch((function(e){return a(e)}))}))}},watch:{value:function(e){this.myValue=e},myValue:function(e){this.$emit("input",e)}}},N=k,_=n("2877"),O=Object(_["a"])(N,a,o,!1,null,null,null);t["default"]=O.exports},a434:function(e,t,n){"use strict";var a=n("23e7"),o=n("23cb"),i=n("a691"),r=n("50c4"),s=n("7b0b"),l=n("65f0"),c=n("8418"),d=n("1dde"),u=n("ae40"),p=d("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,g=9007199254740991,y="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p||!m},{splice:function(e,t){var n,a,d,u,p,m,v=s(this),b=r(v.length),w=o(e,b),$=arguments.length;if(0===$?n=a=0:1===$?(n=0,a=b-w):(n=$-2,a=h(f(i(t),0),b-w)),b+n-a>g)throw TypeError(y);for(d=l(v,a),u=0;u<a;u++)p=w+u,p in v&&c(d,u,v[p]);if(d.length=a,n<a){for(u=w;u<b-a;u++)p=u+a,m=u+n,p in v?v[m]=v[p]:delete v[m];for(u=b;u>b-a+n;u--)delete v[u-1]}else if(n>a)for(u=b-a;u>w;u--)p=u+a-1,m=u+n-1,p in v?v[m]=v[p]:delete v[m];for(u=0;u<n;u++)v[u+w]=arguments[u+2];return v.length=b-a+n,d}})},b576:function(e,t,n){"use strict";var a=n("0fb5"),o=n.n(a);o.a},d922:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4,xs:24}},[n("div",{staticClass:"head-container"},[n("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{size:"small",placeholder:"请输入类别名称",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.deptName,callback:function(t){e.deptName=t},expression:"deptName"}})],1),n("div",{staticClass:"head-container"},[n("el-tree",{ref:"tree",attrs:{data:e.deptOptions,props:e.defaultProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1)]),n("el-col",{attrs:{span:20,xs:24}},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px",size:"small"}},[n("el-form-item",{attrs:{label:"资料名称",prop:"name"}},[n("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入资料名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),n("el-form-item",{attrs:{label:"资料作者",prop:"author"}},[n("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入资料作者",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.author,callback:function(t){e.$set(e.queryParams,"author",t)},expression:"queryParams.author"}})],1),n("el-form-item",{attrs:{label:"上传时间"}},[n("el-date-picker",{staticStyle:{width:"240px"},attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"cyan",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v("搜索")]),n("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),n("el-row",{staticClass:"mb8",attrs:{gutter:10}},[n("el-col",{attrs:{span:1.5}},[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:add"],expression:"['system:user:add']"}],attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),n("el-col",{attrs:{span:1.5}},[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:edit"],expression:"['system:user:edit']"}],attrs:{type:"success",size:"small",icon:"el-icon-edit",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),n("el-col",{attrs:{span:1.5}},[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:remove"],expression:"['system:user:remove']"}],attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:e.multiple},on:{click:function(t){return e.handleDelete()}}},[e._v("删除")])],1),n("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.dataList},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),n("el-table-column",{attrs:{label:"资料类别",align:"center",prop:"categoryName","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"资料名称",align:"left",prop:"name"}}),n("el-table-column",{attrs:{label:"显示顺序",align:"center",prop:"priority"}}),n("el-table-column",{attrs:{label:"上传时间",align:"center",prop:"createTime",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"180","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:edit"],expression:"['system:user:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleUpdate(t.row)}}},[e._v("修改")]),1!==t.row.userId?n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:remove"],expression:"['system:user:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.row.dataId)}}},[e._v("删除")]):e._e()]}}])})],1),n("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[5,10,20,50,100],"page-size":e.queryParams.limit,total:e.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle,"update:currentPage":function(t){return e.$set(e.queryParams,"page",t)},"update:current-page":function(t){return e.$set(e.queryParams,"page",t)}}}),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.totalCount>0,expression:"totalCount>0"}],attrs:{total:e.totalCount,page:e.queryParams.page,limit:e.queryParams.limit},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"limit",t)},pagination:e.getList}})],1)],1),n("el-dialog",{attrs:{title:e.title,visible:e.open,width:"960px","append-to-body":"","destroy-on-close":!0},on:{"update:visible":function(t){e.open=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px",size:"small"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"所属类别",prop:"categoryId"}},[n("treeselect",{attrs:{options:e.deptOptions,normalizer:e.normalizer,placeholder:"请选择资料对应的类别"},model:{value:e.form.categoryId,callback:function(t){e.$set(e.form,"categoryId",t)},expression:"form.categoryId"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"资料名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入用资料名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"显示顺序",prop:"priority"}},[n("el-input-number",{attrs:{"controls-position":"right",min:1},on:{change:e.handleChange},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"资料摘要",prop:"abstracts"}},[e.open?n("tinymce-editor",{ref:"editor",staticStyle:{height:"300px"},model:{value:e.form.abstracts,callback:function(t){e.$set(e.form,"abstracts",t)},expression:"form.abstracts"}}):e._e()],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"资料附件"}},[n("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/sys/oss/uploadFile","on-success":e.handleSuccess,"on-remove":e.handleRemove,"on-preview":e.handlePreview,"on-error":e.handleError,"before-remove":e.beforeRemove,limit:1,headers:e.uploadHeaders,"on-exceed":e.handleExceed,"before-upload":e.uploadBefore,accept:".jpg,.gif,.png,.jpeg,.txt,.pdf,.doc,.docx,.xls,.xlsx","file-list":e.fileList}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("请不要上传限制类型的文件，且不超过250M")])],1)],1)],1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitForm}},[e._v("确 定")]),n("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},o=[],i=(n("99af"),n("4de4"),n("c975"),n("a15b"),n("d81d"),n("a434"),n("b0c0"),n("d3b7"),n("25f0"),n("ed08")),r=n("ca17"),s=n.n(r),l=(n("542c"),n("26dc")),c={name:"User",components:{Treeselect:s.a,TinymceEditor:l["default"]},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,dataList:null,title:"",deptOptions:void 0,dialogDeptOptions:void 0,open:!1,deptName:void 0,dateRange:[],form:{},defaultProps:{value:"categoryId",label:"categoryName",children:"children"},fileList:[],uploadHeaders:{token:this.$cookie.get("token")},coverChildPath:{childPath:"covers_"},fileChildPath:{childPath:"files_"},queryParams:{page:1,limit:10,categoryId:void 0,name:void 0,author:void 0},rules:{categoryId:[{required:!0,message:"资料类型不能为空",trigger:"blur"}],name:[{required:!0,message:"资料名称不能为空",trigger:"blur"}]}}},watch:{deptName:function(e){this.$refs.tree.filter(e)}},created:function(){this.getList(),this.getTreeselect()},methods:{getList:function(){var e=this;this.loading=!0,this.$http({url:this.$http.adornUrl("/cms/data/list"),method:"get",params:this.$http.adornParams(this.addDateRange(this.queryParams,this.dateRange))}).then((function(t){var n=t.data;n&&200===n.code?(e.dataList=n.page.list,e.totalCount=n.page.totalCount):(e.dataList=[],e.totalCount=0),e.loading=!1}))},getTreeselect:function(){var e=this;this.$http({url:this.$http.adornUrl("/cms/category/treeList"),method:"get",params:this.$http.adornParams()}).then((function(t){var n=t.data;n&&200===n.code&&(console.log(n),e.deptOptions=Object(i["g"])(n.treeList,"categoryId"))}))},getDialogTreeselect:function(){var e=this;this.$http({url:this.$http.adornUrl("/cms/category/treeList"),method:"get",params:this.$http.adornParams()}).then((function(t){var n=t.data;n&&200===n.code&&(console.log(n),e.dialogDeptOptions=Object(i["g"])(n.treeList,"categoryId"))}))},filterNode:function(e,t){return!e||-1!==t.categoryName.indexOf(e)},handleNodeClick:function(e){0==e.categoryId?this.resetQuery():(this.queryParams.categoryId=e.categoryId,this.getList())},handleStatusChange:function(e){var t=this,n="0"===e.status?"启用":"停用";this.$confirm('确认要"'+n+'""'+e.userName+'"用户吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return changeUserStatus(e.userId,e.status)})).then((function(){t.msgSuccess(n+"成功")})).catch((function(){e.status="0"===e.status?"1":"0"}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={dataId:void 0,categoryId:void 0,categoryName:void 0,name:void 0,abstracts:void 0,content:void 0,priority:100,coverImgUrl:void 0,author:void 0,platform:void 0,source:void 0,publicNum:void 0,dataFileList:[]},this.fileList=[],this.resetForm("form")},handleQuery:function(){this.getList()},resetQuery:function(){this.queryParams.categoryId=void 0,this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.dataId})),this.single=1!=e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.getDialogTreeselect(),this.open=!0,this.title="添加资料"},handleUpdate:function(e){var t=this;this.reset(),this.getDialogTreeselect();var n=e.dataId||this.ids;this.$http({url:this.$http.adornUrl("/cms/data/detail"),method:"get",params:this.$http.adornParams({id:n})}).then((function(e){var n=e.data;if(n&&200===n.code){t.form.dataId=n.dataInfo.dataId,t.form.categoryId=n.dataInfo.categoryId,t.form.categoryName=n.dataInfo.categoryName,t.form.name=n.dataInfo.name,t.form.abstracts=n.dataInfo.abstracts,t.form.priority=n.dataInfo.priority,t.form.coverImgUrl=n.dataInfo.coverImgUrl,t.form.author=n.dataInfo.author,t.form.platform=n.dataInfo.platform,t.form.source=n.dataInfo.source,t.form.publicNum=n.dataInfo.publicNum;var a=n.dataInfo.dataFileList;if(null!=a&&a.length>0)for(var o=0;o<a.length;o++){var i={uid:a[o].fileId,name:a[o].fileName,url:a[o].filePath};t.fileList.push(i);var r={uid:a[o].fileId,fileName:a[o].fileName,fileType:a[o].fileType,fileSize:a[o].fileSize,filePath:a[o].filePath};t.form.dataFileList.push(r)}t.open=!0,t.title="修改资料"}}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var n=void 0==e.form.dataId?"/cms/data/add":"/cms/data/update";e.$http({url:e.$http.adornUrl(n),method:"post",data:e.$http.adornData(e.form)}).then((function(t){var n=t.data;n&&200===n.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.getList(),e.open=!1}}):e.$message.error(n.msg)}))}}))},handleDelete:function(e){var t=this,n=e?[e]:this.ids;this.$confirm("确定对[id=".concat(n.join(","),"]进行[").concat(n.length<=1?"删除":"批量删除","]操作?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http({url:t.$http.adornUrl("/cms/data/delete"),method:"post",data:t.$http.adornData(n,!1)}).then((function(e){var n=e.data;n&&200===n.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){return t.getList()}}):t.$message.error(n.msg)}))})).catch((function(){}))},importTemplate:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;importTemplate().then((function(t){e.download(t.msg)}))})),handleRemove:function(e,t){for(var n=0;n<this.form.dataFileList.length;n++)e.uid==this.form.dataFileList[n].uid&&this.form.dataFileList.splice(n,1)},handleSuccess:function(e,t){if(e&&200===e.code){var n={uid:t.uid,url:e.files[0].filePath,fileName:e.files[0].fileName,fileType:e.files[0].fileType,fileSize:e.files[0].fileSize,filePath:e.files[0].filePath};this.form.dataFileList.push(n)}else this.$message.error(e.msg)},handleError:function(e,t,n){console.log(e),this.$message.error("文件上传出错,请联系管理员!")},handlePreview:function(e){console.log(e)},uploadBefore:function(e){if(e.size>524288e3)return this.$message.error("File size exceeded 500M!"),!1},handleExceed:function(e,t){this.$message.warning("Number of files exceeded 1!")},beforeRemove:function(e,t){return this.$confirm("Remove ".concat(e.name,"？"),{confirmButtonText:"Confirm",cancelButtonText:"Cancel"})},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.categoryId,label:e.categoryName,children:e.children}},sizeChangeHandle:function(e){this.queryParams.limit=e,this.queryParams.page=1,this.getList()},currentChangeHandle:function(e){this.queryParams.page=e,this.getList()}}},d=c,u=(n("b576"),n("2877")),p=Object(u["a"])(d,a,o,!1,null,null,null);t["default"]=p.exports}}]);